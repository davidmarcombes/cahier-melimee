{# Matching visual #}
<div x-show="cur.type === 'matching'" class="bg-surface-subtle rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 mb-8">
  <div class="prose dark:prose-invert text-center text-sm max-w-none mb-4 text-content-subtle"
       x-show="cur.body" x-html="cur.body"></div>
  <div class="relative" x-ref="matchContainer">
    <svg class="absolute inset-0 w-full h-full pointer-events-none overflow-visible" aria-hidden="true"
         x-html="_matchLinesSvg"></svg>
    <div class="flex justify-between gap-4">
      {# Left column #}
      <div class="flex flex-col gap-3 w-5/12">
        <template x-for="(label, i) in (cur.pairs ? cur.pairs.left : [])" :key="'l'+i">
          <button
            @click="matchTap('left', i)" :disabled="solved"
            class="flex items-center gap-3 w-full px-4 py-3 rounded-xl border-2 text-left font-semibold text-base transition-all active:scale-95 select-none flex-row-reverse"
            :class="{
              'border-primary-500 bg-primary-50 dark:bg-primary-900/20 shadow-md': matchLeftSelected(i),
              'border-green-400 bg-green-50 dark:bg-green-900/20': !matchIsError('left',i) && matchLeftConnected(i) && !matchLeftSelected(i),
              'border-red-400 bg-red-50 dark:bg-red-900/20': matchIsError('left',i),
              'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 hover:border-primary-300': !matchLeftSelected(i) && !matchLeftConnected(i),
              'opacity-60 cursor-not-allowed': solved
            }"
          >
            <span class="w-3 h-3 rounded-full shrink-0 border-2"
                  :class="matchLeftSelected(i) || matchLeftConnected(i) ? 'bg-primary-500 border-primary-500' : 'border-slate-400'"
                  :data-dot="'left'+i"></span>
            <span x-text="label"></span>
          </button>
        </template>
      </div>
      {# Right column #}
      <div class="flex flex-col gap-3 w-5/12">
        <template x-for="(label, i) in (cur.pairs ? cur.pairs.right : [])" :key="'r'+i">
          <button
            @click="matchTap('right', i)" :disabled="solved"
            class="flex items-center gap-3 w-full px-4 py-3 rounded-xl border-2 text-right font-semibold text-base transition-all active:scale-95 select-none"
            :class="{
              'border-green-400 bg-green-50 dark:bg-green-900/20': !matchIsError('right',i) && matchRightConnected(i),
              'border-red-400 bg-red-50 dark:bg-red-900/20': matchIsError('right',i),
              'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 hover:border-primary-300': !matchRightConnected(i),
              'opacity-60 cursor-not-allowed': solved
            }"
          >
            <span class="w-3 h-3 rounded-full shrink-0 border-2"
                  :class="matchRightConnected(i) ? 'bg-primary-500 border-primary-500' : 'border-slate-400'"
                  :data-dot="'right'+i"></span>
            <span x-text="label"></span>
          </button>
        </template>
      </div>
    </div>
  </div>
</div>
{# Matching verify button #}
<div x-show="cur.type === 'matching'" class="flex items-center gap-3 mb-6">
  <button
    @click="check()"
    :disabled="solved || matchConnections.length < (cur.pairs ? cur.pairs.left.length : 0)"
    class="w-full px-6 py-3 text-lg font-bold rounded-xl transition-all active:scale-95
      disabled:opacity-40 disabled:cursor-not-allowed"
    :class="solved ? 'bg-green-500 text-white' : 'bg-primary-500 text-white hover:bg-primary-600 shadow-md'"
  >
    <span x-show="!solved">VÃ©rifier</span>
    <span x-show="solved">Bravo !</span>
  </button>
</div>
